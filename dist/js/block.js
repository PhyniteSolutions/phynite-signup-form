!function(e){const{blocks:n,element:t,components:i,blockEditor:o,apiFetch:l,i18n:r,serverSideRender:a}=e,{registerBlockType:s}=n,{createElement:p,Fragment:u,useState:y,useEffect:g}=t,{PanelBody:h,TextControl:m,ToggleControl:c,SelectControl:d,ColorPicker:f,RangeControl:b,Notice:v,Button:w,Spinner:C}=i,{InspectorControls:x}=o,{__}=r,S=a||e.components.ServerSideRender;s("phynite/signup-form",{title:__("Phynite Signup Form","phynite-signup-form"),description:__("Add a Phynite Analytics signup form to your page","phynite-signup-form"),icon:"chart-line",category:"widgets",keywords:[__("phynite","phynite-signup-form"),__("analytics","phynite-signup-form"),__("signup","phynite-signup-form"),__("form","phynite-signup-form")],supports:{align:["left","center","right","wide","full"],className:!0,customClassName:!0},attributes:{title:{type:"string",default:__("Get Started with Phynite Analytics","phynite-signup-form")},subtitle:{type:"string",default:__("Enter your details below to begin tracking your analytics.","phynite-signup-form")},showTitle:{type:"boolean",default:!0},showSubtitle:{type:"boolean",default:!0},showLogo:{type:"boolean",default:!1},formStyle:{type:"string",default:"default"},primaryColor:{type:"string",default:"#007cba"},buttonText:{type:"string",default:__("Continue to Payment","phynite-signup-form")},showPlanSelection:{type:"boolean",default:!0},defaultPlan:{type:"string",default:"monthly"},showTermsLinks:{type:"boolean",default:!0},termsUrl:{type:"string",default:"/terms-of-service"},privacyUrl:{type:"string",default:"/privacy-policy"},alignment:{type:"string",default:"center"},maxWidth:{type:"number",default:600},className:{type:"string",default:""}},edit:function(e){const{attributes:n,setAttributes:t,className:i}=e,[o,r]=y("checking"),[a,s]=y(null),[P,k]=y(!1);g(()=>{T(),A()},[]);const T=async()=>{try{const e=await l({path:"/phynite-signup/v1/test-connection",method:"GET"});r(e&&e.success?"connected":"error")}catch(e){r("error")}},A=async()=>{try{const e=await l({path:"/phynite-signup/v1/get-products",method:"GET"});s(e||null)}catch(e){s(null)}},L=[{label:__("Default","phynite-signup-form"),value:"default"},{label:__("Minimal","phynite-signup-form"),value:"minimal"},{label:__("Modern","phynite-signup-form"),value:"modern"},{label:__("Compact","phynite-signup-form"),value:"compact"},{label:__("Card","phynite-signup-form"),value:"card"}],R=[{label:__("Left","phynite-signup-form"),value:"left"},{label:__("Center","phynite-signup-form"),value:"center"},{label:__("Right","phynite-signup-form"),value:"right"}],B=[{label:__("Monthly","phynite-signup-form"),value:"monthly"},{label:__("Yearly","phynite-signup-form"),value:"yearly"}];return p(u,{},p(x,{},p(h,{title:__("API Configuration","phynite-signup-form"),initialOpen:"error"===o},"checking"===o&&p("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},p(C),p("span",{},__("Checking API connection...","phynite-signup-form"))),"connected"===o&&p(v,{status:"success",isDismissible:!1},__("API connection successful","phynite-signup-form")),"error"===o&&p(u,{},p(v,{status:"error",isDismissible:!1},__("API not configured or connection failed. Please check the plugin settings.","phynite-signup-form")),p(w,{isPrimary:!0,href:"/wp-admin/options-general.php?page=phynite-signup-form",target:"_blank",style:{marginTop:"12px"}},__("Open Settings","phynite-signup-form"))),p(w,{isSecondary:!0,isBusy:P,disabled:P,onClick:async()=>{k(!0);try{await T(),await A()}catch(e){}finally{k(!1)}},style:{marginTop:"12px"}},__("Test Connection","phynite-signup-form"))),p(h,{title:__("Form Content","phynite-signup-form"),initialOpen:!0},p(c,{label:__("Show Logo","phynite-signup-form"),checked:n.showLogo,onChange:e=>t({showLogo:e})}),p(c,{label:__("Show Title","phynite-signup-form"),checked:n.showTitle,onChange:e=>t({showTitle:e})}),n.showTitle&&p(m,{label:__("Form Title","phynite-signup-form"),value:n.title,onChange:e=>t({title:e})}),p(c,{label:__("Show Subtitle","phynite-signup-form"),checked:n.showSubtitle,onChange:e=>t({showSubtitle:e})}),n.showSubtitle&&p(m,{label:__("Form Subtitle","phynite-signup-form"),value:n.subtitle,onChange:e=>t({subtitle:e})}),p(m,{label:__("Button Text","phynite-signup-form"),value:n.buttonText,onChange:e=>t({buttonText:e})})),p(h,{title:__("Pricing Options","phynite-signup-form"),initialOpen:!1},a&&p("div",{style:{marginBottom:"16px",fontSize:"13px",color:"#757575"}},a.monthly&&a.monthly.amount?"Monthly: $"+a.monthly.amount/100:"",a.monthly&&a.yearly&&a.monthly.amount&&a.yearly.amount?" | ":"",a.yearly&&a.yearly.amount?"Yearly: $"+a.yearly.amount/100:""),p(c,{label:__("Show Plan Selection","phynite-signup-form"),help:__("Allow users to choose between monthly and yearly plans","phynite-signup-form"),checked:n.showPlanSelection,onChange:e=>t({showPlanSelection:e})}),!n.showPlanSelection&&p(d,{label:__("Default Plan","phynite-signup-form"),value:n.defaultPlan,options:B,onChange:e=>t({defaultPlan:e})})),p(h,{title:__("Appearance","phynite-signup-form"),initialOpen:!1},p(d,{label:__("Form Style","phynite-signup-form"),value:n.formStyle,options:L,onChange:e=>t({formStyle:e}),help:(U=n.formStyle,{default:__("Balanced design with standard spacing and borders","phynite-signup-form"),minimal:__("Clean and simple with underlines and lowercase typography","phynite-signup-form"),modern:__("Contemporary style with gradients and elevated shadows","phynite-signup-form"),compact:__("Space-saving design with smaller elements and tight spacing","phynite-signup-form"),card:__("Professional card layout with distinct sections and backgrounds","phynite-signup-form")}[U]||"")}),p(d,{label:__("Alignment","phynite-signup-form"),value:n.alignment,options:R,onChange:e=>t({alignment:e})}),p(b,{label:__("Maximum Width (px)","phynite-signup-form"),value:n.maxWidth,onChange:e=>t({maxWidth:e}),min:300,max:1200,step:50}),p("div",{style:{marginBottom:"16px"}},p("label",{style:{fontWeight:"600",marginBottom:"8px",display:"block"}},__("Primary Color","phynite-signup-form")),p(f,{color:n.primaryColor,onChange:e=>t({primaryColor:e})}))),p(h,{title:__("Terms & Privacy","phynite-signup-form"),initialOpen:!1},p(c,{label:__("Show Terms & Privacy Links","phynite-signup-form"),checked:n.showTermsLinks,onChange:e=>t({showTermsLinks:e})}),n.showTermsLinks&&p(u,{},p(m,{label:__("Terms of Service URL","phynite-signup-form"),value:n.termsUrl,onChange:e=>t({termsUrl:e}),help:__("Relative or absolute URL to your terms page","phynite-signup-form")}),p(m,{label:__("Privacy Policy URL","phynite-signup-form"),value:n.privacyUrl,onChange:e=>t({privacyUrl:e}),help:__("Relative or absolute URL to your privacy policy page","phynite-signup-form")})))),p("div",{className:`phynite-signup-form-block-wrapper ${i||""}`,style:{textAlign:n.alignment,"--primary-color":n.primaryColor}},"error"===o?p("div",{className:"phynite-signup-form-placeholder",style:{padding:"40px",border:"2px dashed #ddd",borderRadius:"8px",textAlign:"center",backgroundColor:"#f9f9f9"}},p("div",{style:{fontSize:"16px",marginBottom:"12px",color:"#d63638"}},"⚠️ "+__("Phynite Signup Form","phynite-signup-form")),p("p",{style:{margin:"0 0 16px",color:"#757575"}},__("API configuration required. Please configure your Stewie API key in the plugin settings.","phynite-signup-form")),p(w,{isPrimary:!0,href:"/wp-admin/options-general.php?page=phynite-signup-form",target:"_blank"},__("Configure Settings","phynite-signup-form"))):p("div",{className:"phynite-signup-form-preview-container",style:{border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden"}},p("div",{style:{padding:"10px",backgroundColor:"#f0f0f1",borderBottom:"1px solid #ddd",fontSize:"12px",color:"#666",textAlign:"center"}},__("Live Preview","phynite-signup-form")),S&&p(S,{block:"phynite/signup-form",attributes:n,className:"phynite-block-server-preview",LoadingResponsePlaceholder:()=>p("div",{style:{padding:"40px",textAlign:"center",color:"#666"}},p(C)," ",__("Loading preview...","phynite-signup-form")),ErrorResponsePlaceholder:({response:e})=>p("div",{style:{padding:"20px",textAlign:"center",color:"#d63638",backgroundColor:"#fcf0f1"}},p("p",{},__("Preview Error:","phynite-signup-form")),p("code",{style:{fontSize:"11px"}},e&&e.message||__("Unable to render preview","phynite-signup-form"))),EmptyResponsePlaceholder:()=>p("div",{style:{padding:"20px",textAlign:"center",color:"#666"}},__("No content to preview","phynite-signup-form"))}))));var U},save:function(){return null}})}(window.wp);